var cdMenus;!function(a){cdMenus={init:function(){this.modify_max_menu_depth(),this.jQuery_extensions(),this.separator_checkbox(),this.link_checkbox(),this.addItemToMenu(),this.icon_selector()},remove_first_collapse:function(){a("#collapse-menu").remove()},icon_selector:function(){a(document).on("click",".edit-menu-item-cd-icon",function(b){console.log("test"),b.stopPropagation(),a(this).is(":focus")&&a(this).closest(".cd-menu-icon-field").find(".cd-menu-icon-selector").show()}),a("body").click(function(){a(".cd-menu-icon-selector").hide()}),a(document).on("click",".cd-menu-icon-selector li",function(){var b=a(this).attr("data-icon"),c=a(this).closest(".menu-item").hasClass("menu-item-depth-1")?"dashicons hidden "+b:"dashicons "+b;a(this).closest(".cd-menu-icon-field").find('input[type="text"]').val(b),a(this).closest(".menu-item").find(".item-title").find(".dashicons").attr("class",c)})},addItemToMenu:function(){wpNavMenu.addItemToMenu=function(b,c,d){var e,f=a("#menu").val(),g=a("#menu-settings-column-nonce").val();c=c||function(){},d=d||function(){},e={action:"cd_add_menu_item",menu:f,"menu-settings-column-nonce":g,"menu-item":b},a.post(ajaxurl,e,function(b){var f=a("#menu-instructions");b=a.trim(b),c(b,e),a("li.pending").hide().fadeIn("slow"),a(".drag-instructions").show(),!f.hasClass("menu-instructions-inactive")&&f.siblings().length&&f.addClass("menu-instructions-inactive"),d()})}},link_checkbox:function(){function b(){a("#add-custom-links").find(".spinner").is(":visible")?setTimeout(b,100):a("#add-custom-links").find('input[type="text"]').val("")}a("#submit-custom-link").click(function(){a("#custom-checkbox").prop("checked",!0),setTimeout(function(){b()},50)}),a("#custom-link").find('input[type="text"]').keypress(function(c){13==c.which&&(a("#submit-custom-link").click(),b())})},separator_checkbox:function(){a("#submit-separator").click(function(){a("#separator-checkbox").prop("checked",!0)})},jQuery_extensions:function(){a.fn.extend({getItemData:function(a,b){a=a||"menu-item";var c,d={},e=["menu-item-db-id","menu-item-parent-id","menu-item-position","menu-item-title","menu-item-original-title","menu-item-url","menu-item-classes","menu-item-cd-type","menu-item-cd-icon","menu-item-cd-page-title","menu-item-cd-submenu-parent","menu-item-cd-params","menu-item-cd-hookname"];return b||"menu-item"!=a||(b=this.find(".menu-item-data-db-id").val()),b?(this.find("input").each(function(){var f;for(c=e.length;c--;)"menu-item"==a?f=e[c]+"["+b+"]":"add-menu-item"==a&&(f="menu-item["+b+"]["+e[c]+"]"),this.name&&f==this.name&&(d[e[c]]=this.value)}),d):d}})},modify_max_menu_depth:function(){function b(a){var b;i=a.placeholder.prev(),j=a.placeholder.next(),i[0]==a.item[0]&&(i=i.prev()),j[0]==a.item[0]&&(j=j.next()),k=i.length?i.offset().top+i.height():0,l=j.length?j.offset().top+j.height()/3:0,g=j.length?j.menuItemDepth():0,h=i.length?(b=i.menuItemDepth()+1)>wpNavMenu.options.globalMaxDepth?wpNavMenu.options.globalMaxDepth:b:0}function c(a,b){a.placeholder.updateDepthClass(b,p),p=b}function d(){if(!r[0].className)return 0;var a=r[0].className.match(/menu-max-depth-(\d+)/);return a&&a[1]?parseInt(a[1],10):0}function e(b){var c,d=s;if(0!==b){if(b>0)c=o+b,c>s&&(d=c);else if(0>b&&o==s)for(;!a(".menu-item-depth-"+d,wpNavMenu.menuList).length&&d>0;)d--;r.removeClass("menu-max-depth-"+s).addClass("menu-max-depth-"+d),s=d}}wpNavMenu.options.globalMaxDepth=1;var f,g,h,i,j,k,l,m,n,o,p=0,q=wpNavMenu.menuList.offset().left,r=a("body"),s=d();0!==a("#menu-to-edit li").length&&a(".drag-instructions").show(),q+=wpNavMenu.isRTL?wpNavMenu.menuList.width():0;var t;wpNavMenu.menuList.sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder",start:function(d,e){var g,h,i,j,k;wpNavMenu.isRTL&&(e.item[0].style.right="auto"),n=e.item.children(".menu-item-transport"),f=e.item.menuItemDepth(),c(e,f),i=e.item.next()[0]==e.placeholder[0]?e.item.next():e.item,j=i.childMenuItems(),n.append(j),g=n.outerHeight(),g+=g>0?1*e.placeholder.css("margin-top").slice(0,-2):0,g+=e.helper.outerHeight(),m=g,g-=2,e.placeholder.height(g),o=f,j.each(function(){var b=a(this).menuItemDepth();o=b>o?b:o}),h=e.helper.find(".menu-item-handle").outerWidth(),h+=wpNavMenu.depthToPx(o-f),h-=2,e.placeholder.width(h),k=e.placeholder.next(),k.css("margin-top",m+"px"),e.placeholder.detach(),a(this).sortable("refresh"),e.item.after(e.placeholder),k.css("margin-top",0),b(e),t=!!j.length},stop:function(a,b){var c,d,g,h=p-f;c=n.children().insertAfter(b.item),d=b.item.find(".item-title .is-submenu"),p>0?d.show():d.hide(),g=b.item.find(".item-title .dashicons"),0==p?g.removeClass("hidden"):g.addClass("hidden"),0!==h&&(b.item.updateDepthClass(p),c.shiftDepthClass(h),e(h)),wpNavMenu.registerChange(),b.item.updateParentMenuItemDBId(),b.item[0].style.top=0,wpNavMenu.isRTL&&(b.item[0].style.left="auto",b.item[0].style.right=0),b.item.hasClass("menu-item-separator")&&0!=p&&(wpNavMenu.menuList.sortable("cancel"),b.item.updateDepthClass(0),d.hide(),b.item.find(".menu-item-data-parent-id").val("0"),b.item.effect("shake")),wpNavMenu.refreshKeyboardAccessibility(),wpNavMenu.refreshAdvancedAccessibility()},change:function(a,c){c.placeholder.parent().hasClass("menu")||(i.length?i.after(c.placeholder):wpNavMenu.menuList.prepend(c.placeholder)),b(c)},sort:function(d,e){var f=e.helper.offset(),i=wpNavMenu.isRTL?f.left+e.helper.width():f.left,n=wpNavMenu.negateIfRTL*wpNavMenu.pxToDepth(i-q);n>h||f.top<k?n=h:g>n&&(n=g);var o=!1;a("#menu-to-edit").find("li.menu-item-separator").each(function(){(a(this).next("li.sortable-placeholder").length||a(this).next("li.ui-sortable-helper").next("li.sortable-placeholder").length)&&(o=!0)}),n==p||t||o?(t||o)&&c(e,0):c(e,n),l&&f.top+m>l&&(j.after(e.placeholder),b(e),a(this).sortable("refreshPositions"))}})}},a(function(){a("body").hasClass("cd-nav-menu")&&!a("#menu-settings-column").hasClass("metabox-holder-disabled")&&cdMenus.init(),cdMenus.remove_first_collapse()})}(jQuery);