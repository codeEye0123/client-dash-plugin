var cdAdminMenu;!function(a){cdAdminMenu={init:function(){this.modify_max_menu_depth(),this.jQuery_extensions(),this.separator_checkbox(),this.link_checkbox()},link_checkbox:function(){a("#submit-custom-link").click(function(){a("#custom-checkbox").prop("checked",!0)}),a("#custom-link").find('input[type="text"]').keypress(function(b){13==b.which&&a("#submit-custom-link").click()})},separator_checkbox:function(){a("#submit-separator").click(function(){a("#separator-checkbox").prop("checked",!0)})},jQuery_extensions:function(){a.fn.extend({getItemData:function(a,b){a=a||"menu-item";var c,d={},e=["menu-item-db-id","menu-item-object-id","menu-item-object","menu-item-parent-id","menu-item-position","menu-item-type","menu-item-title","menu-item-url","menu-item-description","menu-item-attr-title","menu-item-target","menu-item-classes","menu-item-xfn","custom-meta-cd-object-type","custom-meta-cd-post-type","custom-meta-cd-original-title","custom-meta-cd-icon","custom-meta-cd-type","custom-meta-cd-separator-height","custom-meta-cd-url","custom-meta-cd-page-title"];return b||"menu-item"!=a||(b=this.find(".menu-item-data-db-id").val()),b?(this.find("input").each(function(){var f;for(c=e.length;c--;)"menu-item"==a?f=e[c]+"["+b+"]":"add-menu-item"==a&&(f="menu-item["+b+"]["+e[c]+"]"),this.name&&f==this.name&&(d[e[c]]=this.value)}),d):d}})},modify_max_menu_depth:function(){function b(a){var b;i=a.placeholder.prev(),j=a.placeholder.next(),i[0]==a.item[0]&&(i=i.prev()),j[0]==a.item[0]&&(j=j.next()),k=i.length?i.offset().top+i.height():0,l=j.length?j.offset().top+j.height()/3:0,g=j.length?j.menuItemDepth():0,h=i.length?(b=i.menuItemDepth()+1)>wpNavMenu.options.globalMaxDepth?wpNavMenu.options.globalMaxDepth:b:0}function c(a,b){a.placeholder.updateDepthClass(b,p),p=b}function d(){if(!r[0].className)return 0;var a=r[0].className.match(/menu-max-depth-(\d+)/);return a&&a[1]?parseInt(a[1],10):0}function e(b){var c,d=s;if(0!==b){if(b>0)c=o+b,c>s&&(d=c);else if(0>b&&o==s)for(;!a(".menu-item-depth-"+d,wpNavMenu.menuList).length&&d>0;)d--;r.removeClass("menu-max-depth-"+s).addClass("menu-max-depth-"+d),s=d}}wpNavMenu.options.globalMaxDepth=1;var f,g,h,i,j,k,l,m,n,o,p=0,q=wpNavMenu.menuList.offset().left,r=a("body"),s=d();0!==a("#menu-to-edit li").length&&a(".drag-instructions").show(),q+=wpNavMenu.isRTL?wpNavMenu.menuList.width():0;var t;wpNavMenu.menuList.sortable({handle:".menu-item-handle",placeholder:"sortable-placeholder",start:function(d,e){var g,h,i,j,k;wpNavMenu.isRTL&&(e.item[0].style.right="auto"),n=e.item.children(".menu-item-transport"),f=e.item.menuItemDepth(),c(e,f),i=e.item.next()[0]==e.placeholder[0]?e.item.next():e.item,j=i.childMenuItems(),n.append(j),g=n.outerHeight(),g+=g>0?1*e.placeholder.css("margin-top").slice(0,-2):0,g+=e.helper.outerHeight(),m=g,g-=2,e.placeholder.height(g),o=f,j.each(function(){var b=a(this).menuItemDepth();o=b>o?b:o}),h=e.helper.find(".menu-item-handle").outerWidth(),h+=wpNavMenu.depthToPx(o-f),h-=2,e.placeholder.width(h),k=e.placeholder.next(),k.css("margin-top",m+"px"),e.placeholder.detach(),a(this).sortable("refresh"),e.item.after(e.placeholder),k.css("margin-top",0),b(e),t=!!j.length},stop:function(a,b){var c,d,g,h=p-f;c=n.children().insertAfter(b.item),d=b.item.find(".item-title .is-submenu"),p>0?d.show():d.hide(),g=b.item.find(".dashicons"),0==p?g.removeClass("hidden"):g.addClass("hidden"),0!==h&&(b.item.updateDepthClass(p),c.shiftDepthClass(h),e(h)),wpNavMenu.registerChange(),b.item.updateParentMenuItemDBId(),b.item[0].style.top=0,wpNavMenu.isRTL&&(b.item[0].style.left="auto",b.item[0].style.right=0),b.item.hasClass("menu-item-separator")&&0!=p&&(wpNavMenu.menuList.sortable("cancel"),b.item.updateDepthClass(0),d.hide(),b.item.effect("shake")),wpNavMenu.refreshKeyboardAccessibility(),wpNavMenu.refreshAdvancedAccessibility()},change:function(a,c){c.placeholder.parent().hasClass("menu")||(i.length?i.after(c.placeholder):wpNavMenu.menuList.prepend(c.placeholder)),b(c)},sort:function(d,e){var f=e.helper.offset(),i=wpNavMenu.isRTL?f.left+e.helper.width():f.left,n=wpNavMenu.negateIfRTL*wpNavMenu.pxToDepth(i-q);n>h||f.top<k?n=h:g>n&&(n=g);var o=!1;a("#menu-to-edit").find("li.menu-item-separator").each(function(){(a(this).next("li.sortable-placeholder").length||a(this).next("li.ui-sortable-helper").next("li.sortable-placeholder").length)&&(o=!0)}),n==p||t||o?(t||o)&&c(e,0):c(e,n),l&&f.top+m>l&&(j.after(e.placeholder),b(e),a(this).sortable("refreshPositions"))}})}},a(function(){a("body").hasClass("cd-nav-menu")&&!a("#menu-settings-column").hasClass("metabox-holder-disabled")&&cdAdminMenu.init()})}(jQuery);var cdAJAX;!function(a){cdAJAX={reset_roles:function(){jQuery("body").append('<div id="cd-ajax-cover"></div>'),jQuery("#cd-ajax-cover").animate({opacity:1},200);var a={action:"cd_reset_roles"};jQuery.post(ajaxurl,a,function(a){alert(a),location.reload()})},reset_all_settings:function(){var a={action:"cd_reset_all_settings"};jQuery.post(ajaxurl,a,function(a){alert(a)})},reset_admin_menu:function(){var a={action:"cd_reset_admin_menu","cd-create-admin-menus":!0};jQuery.post(ajaxurl,a,function(a){alert(a)})},populate_nav_menu:function(){for(var b=cdData.navMenusAJAX.menu_items.length,c=0,d=0;b>d;d++){var e={action:"cd_populate_nav_menu",menu_item:cdData.navMenusAJAX.menu_items[d].menu_item,menu_item_position:cdData.navMenusAJAX.menu_items[d].menu_item_position,menu_ID:cdData.navMenusAJAX.menu_ID,role:cdData.navMenusAJAX.role};a.post(ajaxurl,e,function(){c++;var d=Math.round(100/b*c);if(a(".cd-progress-bar-inner").css("right",100-d+"%"),a(".cd-progress-bar-percent").html(d+"%"),c==b){var e={action:"cd_save_nav_menu",menu_ID:cdData.navMenusAJAX.menu_ID};a.post(ajaxurl,e,function(){window.location.href=cdData.navMenusAJAX.url})}})}}},a(function(){cdData.hasOwnProperty("navMenusAJAX")&&cdAJAX.populate_nav_menu()})}(jQuery);var cdMain;!function(a){cdMain={init:function(){cdMain.disable_drag(),jQuery(".cd-toggle-switch").click(function(a){a.stopPropagation(),cdMain.toggle_switch(jQuery(this))}),jQuery(".cd-tip-close").click(function(a){a.stopPropagation(),cdMain.close_tip(jQuery(this))}),cdMain.tips_stop_propogation()},updown:function(a){var b=document.getElementById(a);b.style.display="block"==b.style.display?"none":"block"},toggle_roles_page:function(a){var b=jQuery(a).siblings(".cd-display-grid-tab"),c=jQuery(a).find(".cd-up-down"),d=b.find(".cd-display-grid-block"),e=b.find(".cd-up-down");c.toggleClass("open"),b.toggleClass("hidden"),e.removeClass("open"),d.addClass("hidden")},toggle_roles_tab:function(a){var b=jQuery(a).siblings(".cd-display-grid-block"),c=jQuery(a).find(".cd-up-down");c.toggleClass("open"),b.toggleClass("hidden")},dashicons_selected:function(a){var b=jQuery("#cd-dashicons-selections"),c=jQuery("#cd-dashicons-grid"),d=b.find(".cd-"+a+" .dashicons").attr("data-dashicon");b.find(".dashicons").removeClass("active"),c.find(".cd-dashicons-grid-item").removeClass("active"),b.find(".cd-"+a+" .dashicons").addClass("active"),c.find(".dashicons."+d).closest(".cd-dashicons-grid-item").addClass("active")},dashicons_change:function(a,b){var c=jQuery("#cd-dashicons-selections"),d=c.find(".dashicons.active").attr("data-widget");jQuery("#cd_dashicon_"+d).val(a),c.find(".dashicons.active").attr({"data-dashicon":a,"class":"dashicons "+a+" active"}),jQuery("#cd-dashicons-grid").find(".cd-dashicons-grid-item").removeClass("active"),jQuery(b).closest(".cd-dashicons-grid-item").addClass("active")},disable_drag:function(){var a=jQuery("#dashboard-widgets");a.length&&a.find(".meta-box-sortables").sortable({disabled:!0})},toggle_switch:function(a){var b=a.find("input");a.toggleClass("on").toggleClass("off"),b.prop("disabled")?b.prop("disabled",!1):b.prop("disabled",!0)},show_tips:function(){jQuery(".cd-tip").each(function(){jQuery(this).removeClass("cd-tip-hidden")})},close_tip:function(a){a.closest(".cd-tip").addClass("cd-tip-hidden")},tips_stop_propogation:function(){jQuery(".cd-tip *").click(function(a){a.stopPropagation()})}},a(function(){cdMain.init()}),a(window).load(function(){setTimeout(cdMain.show_tips,1e3)})}(jQuery);var cdPointers;!function(a){cdPointers={init:function(){a(".cd-pointer").each(function(){var b=a(this),c={content:"Client Dash is AWESOME",edge:"left",align:"center"};for(var d in c)if(c.hasOwnProperty(d)){if("content"==d){c[d]=b.html();continue}b.attr("data-cd-pointer-"+d)&&(c[d]=b.attr("data-cd-pointer-"+d))}b.pointer({content:c.content,position:{edge:c.edge,align:c.align}}).pointer("open")})}},a(function(){cdPointers.init()})}(jQuery);var cdWidgets;!function(a){cdWidgets={init:function(){a("#cd-dash-widgets-sortable").sortable({placeholder:"ui-state-highlight",items:"li",containment:"document",delay:100,cursor:"move",start:function(a,b){b.item.find(".cd-up-down").removeClass("open"),b.item.find(".cd-dash-widget-settings").removeClass("open"),b.item.data("dragging",!0)},stop:function(a,b){b.item.hasClass("ui-draggable")&&(b.item.removeClass("ui-draggable"),b.item.find("input").prop("disabled",!1),cdWidgets.toggle_init(b.item)),cdWidgets.update_numbers(),b.item.data("dragging",!1)}}),a("#cd-dash-widgets-left").find(".ui-draggable").draggable({connectToSortable:".ui-sortable",helper:"clone",containment:"document",handle:".cd-dash-widget-title",cursor:"pointer",start:function(a,b){b.helper.find(".cd-dash-widget-description").remove()}})},toggle_init:function(b){b.on("click",function(){a(this).data("dragging")||a(this).find(".cd-up-down").toggleClass("open").closest(".cd-dash-widget-title").siblings(".cd-dash-widget-settings").toggleClass("open")})},update_numbers:function(){a("#cd-dash-widgets-sortable").find(".cd-dash-widget").each(function(){a(this).find("input").each(function(){var b=a(this).closest(".cd-dash-widget").index(),c=a(this).attr("name"),d=c.replace(/(cd_widgets\[)(\d+)/g,"cd_widgets["+b);a(this).attr("name",d)})})},remove:function(b){a(b).closest(".cd-dash-widget").remove()}},a(function(){cdWidgets.init(),a("#cd-dash-widgets-sortable").find(".cd-dash-widget").each(function(){cdWidgets.toggle_init(a(this))})})}(jQuery);